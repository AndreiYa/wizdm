<mat-toolbar>

  <!-- NAVIGATION TOOLBAR on TOP -->
  <mat-toolbar-row fxLayout="row" fxLayoutAlign="space-between center" [@shrink]="someAction">

    <wm-logo></wm-logo>
  
    <!-- DESKTOP VERSION -->
    <div fxLayout="row" fxLayoutAlign="end center" fxHide.lt-sm>
      
      <!-- MENU LINKS w/ INKBAR -->
      <div #linkbar>
      
        <a mat-button *ngFor="let item of menuItems" 
          routerLinkActive="link-active" 
          [routerLink]="item.link"
          [queryParams]="item.params"
          [ngClass]="{'highlight': item.highlight}">
          {{item.label}}
        </a>

        <!-- USER NOTIFICATIONS -->
        <!--button *ngIf="signedIn" mat-icon-button routerLink="messages" margin="right" routerLinkActive="link-active">
          <wm-icon icon="mail_outline" matBadge="3"></wm-icon>
        </button-->

        <!-- INKBAR -->
        <wm-inkbar [position]="inkbar"></wm-inkbar>      
      </div>

      <!-- USER PROFILE BUTTON -->
      <button mat-icon-button routerLink="profile" *ngIf="signedIn">
        <wm-avatar [src]="userImage"></wm-avatar>
      </button>
      
    </div>
    
    <!-- MOBILE VERSION -->
    <div fxLayout="row" fxLayoutAlign="end center" fxHide fxShow.lt-sm>

      <!-- USER NOTIFICATIONS -->
      <!--button mat-icon-button routerLink="messages" margin="right" *ngIf="signedIn">
        <wm-icon icon="mail_outline" matBadge="3"></wm-icon>
      </button-->

      <!-- USER PROFILE BUTTON -->
      <button mat-icon-button routerLink="profile" *ngIf="signedIn">
        <wm-avatar [src]="userImage"></wm-avatar>
      </button>

      <!-- MENU TOGGLER -->
      <button mat-icon-button (click)="toggle()">
        <wm-toggler toggler-style="more_vert" [status]="toggler"></wm-toggler>
      </button>
    </div>

  </mat-toolbar-row>

  <!-- ACTION BAR -->
  <mat-toolbar-row fxLayout="row" fxLayoutAlign="end center" [@expand]="true" [@fadeInSequence]="actionButtons" *ngIf="someAction">
    
    <ng-container *ngTemplateOutlet="actionBar; context: { buttons: actionButtons, menu: false }">
    </ng-container>

  </mat-toolbar-row>

</mat-toolbar>

<!-- Renders the action bar buttons -->
<ng-template let-buttons="buttons" let-menuItem="menu" #actionBar>

  <ng-container *ngFor="let button of buttons">

    <!-- ACTION MENU -->
    <ng-container *ngIf="button.menu">
      <mat-menu overlapTrigger="false" #menu>
        <ng-container *ngTemplateOutlet="actionBar; context: { buttons: button.menu, menu: true }"></ng-container>
      </mat-menu>
      
      <button mat-icon-button color="primary" [matMenuTriggerFor]="menu" @fadeIn>
        <wm-icon icon="more_vert"></wm-icon>
      </button>
    </ng-container>

    <!-- ACTION BUTTON, LINK or MENU-ITEM-->
    <wm-toolbar-action [menu]="menuItem" [action]="button" (activate)="performAction($event)">
    </wm-toolbar-action>

  </ng-container> 

</ng-template>

<mat-divider [@divider]="divider"></mat-divider>
