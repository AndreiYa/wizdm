
<!-- Navigation linkbar-->
<wm-router-inkbar #inkbar color="primary" *ngIf="menuItems?.length > 0">

  <!-- Links animation container -->
  <span [@menu]="menuItems" (@menu.start)="inkbar.clear()" (@menu.done)="inkbar.update()">

    <!-- Top level links -->
    <ng-container *ngFor="let item of menuItems">

      <!-- Top level link buttons -->
      <button mat-button [routerLink]="item.link" 
                         [queryParams]="item.params" 
                         [routerLinkActiveOptions] = "{ exact: true }"
                         routerLinkActive *ngIf="item.link">{{ item.label }}</button>

      <!-- Top level menu -->
      <ng-contaienr *ngIf="item.menu">

        <!-- Top menu trigger -->
        <button mat-button [matMenuTriggerFor]="topMenu">{{ item.label }}</button>

        <!-- Top menu items -->
        <mat-menu #topMenu="matMenu">
            
          <!-- Top menu level links -->
          <ng-container *ngFor="let top of item.menu">

            <!-- Menu level link buttons -->
            <button mat-menu-item [routerLink]="top.link" 
                                  [queryParams]="top.params" 
                                  [routerLinkActiveOptions] = "{ exact: true }"
                                  routerLinkActive *ngIf="top.link">{{ top.label }}</button>

            <!-- Sub menus -->
            <ng-contaienr *ngIf="top.menu">

              <!-- Sub menu level trigger -->
              <button mat-menu-item [matMenuTriggerFor]="subMenu" >{{ top.label }}</button>

              <!-- Sub menu items -->
              <mat-menu #subMenu="matMenu">

                <!-- Sub menu level links -->
                <ng-container *ngFor="let sub of top.menu">

                  <!-- Sub menu level link button -->
                  <button mat-menu-item [routerLink]="sub.link" 
                                        [queryParams]="sub.params" 
                                        [routerLinkActiveOptions] = "{ exact: true }"
                                        routerLinkActive *ngIf="sub.link">{{ sub.label }}</button>
                </ng-container>

              </mat-menu>

            </ng-contaienr>
            
          </ng-container>
          
        </mat-menu>

      </ng-contaienr>
      
    </ng-container>
   
  </span>

</wm-router-inkbar>
