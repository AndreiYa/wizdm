
<ng-container *wmContent="let msgs select 'chat'">

  <!-- use gtag="chat" somewhere--> 

  <div fxFlex="1 1 auto" style="position: relative;">

    <wm-chat-viewer [messages]="messages" cdkScrollable></wm-chat-viewer>

  </div>

  <!--section fxFlex="1 1 auto" fxLayout="column" fxLayoutAlign="start center">

    <div class="message out">

      <wm-balloon class="mat-elevation-z3" side="left" color="primary">

        <span wm-emoji-text="Fake message out"></span>

      </wm-balloon>

    </div>

    <div class="message" [ngClass]="even ? 'out' : 'in'" *ngFor="let msg of messages;let even = even">

      <wm-balloon class="mat-elevation-z3" [side]="even ? 'left' : 'right'" [color]="even ? 'primary' : 'accent'">

        <span [wm-emoji-text]="msg"></span>

      </wm-balloon>

    </div>

    <br><br>

  </section-->

  <!-- Message composer -->
  <wm-chat-composer fxFlex="0 0 auto" [(value)]="text" [keys]="keys" (send)="send($event)"></wm-chat-composer> 

  <!-- Can Leave dialog -->
  <wm-dialog *ngIf="msgs.canLeave as leave" [dontLeave]="!!text">

    <h2 mat-dialog-title><b>{{ leave.title || 'Unsent message' }}</b></h2>
  
    <mat-dialog-content [wm-readme]="leave.message">
      You're about to leave the page without sending the last message.
    </mat-dialog-content>
  
    <mat-dialog-actions align="end">
      <button mat-button color="warn" [mat-dialog-close]="false" cdkFocusInitial>{{ leave.cancel || 'Wait' }}</button>
      <button mat-button color="primary" [mat-dialog-close]="true">{{ leave.ok || 'Proceed' }}</button>
    </mat-dialog-actions>

  </wm-dialog>

</ng-container>

