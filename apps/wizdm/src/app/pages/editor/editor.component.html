
<mat-drawer-container>
  
  <mat-drawer mode="side" position="end" opened>
    
    <h2>{{ msgs.tableOfContents }}</h2>

    <nav *ngFor="let node of document?.content; index as index">

        <span *ngIf="node.level > 0" 
              [attr.toc]="node.level" 
              routerLink="." 
              [fragment]="'N'+index">
                {{ renderTOC(node) }}
        </span>
      
    </nav>
        
  </mat-drawer>
  
  <mat-drawer-content fxFlex="1 1 auto" class="desk">
  
      <!-- Renders the documetn body -->
      <div class="page" 
           [wm-editable-document]="document"
           [edit]="editMode" 
           [@editing]="editMode"
           (contextmenu)="editMode ? menu.open($event) : true" 
           (change)="save($event)"
           (navigate)="navigate($event)">
      </div>

      <!-- Context menu -->
      <wm-context-menu #menu [msgs]="msgs.tools"></wm-context-menu>
  
  </mat-drawer-content>

</mat-drawer-container>

<!-- Editing tools -->
<wm-toolbox *ngIf="editMode" [msgs]="msgs.tools"></wm-toolbox>

<!-- Document body -->
<!--div fxLayout="row" fxLayoutAlign="space-between strech">

  <div fxFlex="1 1 auto" class="desk">

    <div class="page" [@editing]="editMode">

        <wm-editable-toc class="table-of-contents" [source]="doc" fxHide fxShow.lt-sm>
          <h2>{{ msgs.tableOfContents }}</h2>
        </wm-editable-toc>

      <wm-editable-document
        (contextmenu)="editMode ? menu.open($event) : true" 
        (change)="save($event)"
        [source]="document"
        [edit]="editMode" #doc>
      </wm-editable-document>

    </div>
  
  </div>

</div-->
